CPU
k6 は高度にマルチスレッド化されており、利用可能なすべての CPU コアを効果的に利用します。
必要な CPU の量は、テスト スクリプトと関連ファイルによって異なります。テスト ファイルに関係なく、大規模なテストでは大量の CPU パワーが必要になると想定できます。少なくとも 20% のアイドル サイクルが発生するようにマシンのサイズを設定することをお勧めします (最大 80% が k6 によって使用され、20% がアイドル状態)。k6 が CPU の 100% を使用して負荷を生成すると、テストでスロットル制限が発生し、結果メトリクスの応答時間が実際よりも大幅に長くなる可能性があります。
メモリー
k6 は、他の負荷テスト ツールよりも効率的に大量のメモリを使用できます。メモリ消費量はテスト シナリオに大きく依存します。テストのメモリ要件を見積もるには、100VU を備えた開発マシンでテストを実行し、消費されたメモリに目標の VU 数を掛けます。
単純なテストでは、VU あたり約 1 ～ 5MB を使用します。(1000VU = 1 ～ 5GB)。ファイルのアップロードを使用するテスト、または大きな JS モジュールをロードするテストでは、VU ごとに数十メガバイトを消費する可能性があります。各 VU には、テストで使用するすべての JS モジュールのコピーがあることに注意してください。VU 間でメモリを共有するには、SharedArray または Redis などの外部データ ストアの使用を検討してください。
使用している場合
スワップスペース
、無効にすることを検討してください。システムの物理メモリが不足すると、メモリをより低速なセカンダリ ストレージにスワップするプロセスにより、パフォーマンスとシステムの安定性に不安定な影響が生じます。テストのさまざまな部分でロード ジェネレーターのパフォーマンスが異なるため、これによりテスト結果が無効になる可能性があります。代わりに、テストで達成すると予想されるメモリ使用量を事前に計画し、使用量が 90% を超えないように十分な物理 RAM があることを確認してください。

単一の k6 プロセスは、ロード ジェネレーター マシン上のすべての CPU コアを効率的に使用します。利用可能なリソースに応じて、このドキュメントで説明されているガイドラインを使用すると、k6 の単一インスタンスで 30,000 ～ 40,000 人の同時ユーザー (VU) を実行できます。場合によっては、この数の VU により 1 秒あたり最大 300,000 の HTTP リクエスト(RPS) が生成される可能性があります。

1 秒あたり 100,000 ～ 300,000 リクエスト (1 分あたり 600 ～ 1200 万リクエスト) を超えるリクエストを必要としない限り、k6 の 1 つのインスタンスでニーズを満たせる可能性があります。単一マシンから最大の負荷を得る方法について学習してください。

---

データの形式:

Prometheus: k6 はデータを Prometheus のスクレイパー形式でエクスポートします。これにより、Prometheus がデータをスクレイピングして集約・保存できるようになります。Prometheus は、指定された間隔で HTTP エンドポイントをスクレイピングしてメトリクスを収集します。
InfluxDB: k6 はデータを InfluxDB に直接送信するため、データを InfluxDB のラインプロトコル形式に変換する必要があります。ラインプロトコルは、データポイントを行ごとに表現するシンプルなテキスト形式です。
メトリクスの保存とクエリ:

Prometheus: Prometheus はデータをローカルに保存し、PromQL（Prometheus Query Language）を使用してデータをクエリできます。PromQL を使用すると、メトリクスを柔軟にフィルタリング、集計、グラフ化できます。
InfluxDB: InfluxDB は、データをデータベースに保存し、InfluxQL または Flux というクエリ言語を使用してデータをクエリできます。InfluxQL は SQL に似た構文を持ち、Flux はより柔軟で強力なクエリ言語です。
ツールの統合と可視化:

Prometheus: Prometheus はエコシステムが豊富であり、Grafana と統合してデータを可視化するのに便利です。Prometheus のメトリクスデータを Grafana に接続して、ダッシュボードを作成したり、アラートを設定したりできます。
InfluxDB: InfluxDB も Grafana と統合でき、データの可視化に使用できます。また、InfluxDB には Chronograf というビジュアライゼーションツールもあります。

---

InfluxDB2.0 を使用する場合、自前でビルドする必要がある
https://github.com/grafana/xk6-output-influxdb
